# Franema Summer Beer Challange!
Бот в телеграме, который подсчитывает объем выпитого участниками пива за лето 2025. Составляет таблицу с результатами всех участников и выявляет победителя.

### Основной функционал бота:
1. Регистрация участников:
- Возможность для пользователей присоединиться к "пивному челленджу".
- Команда /start или /join для начала участия.
- Бот сохраняет информацию о пользователях, включая их Telegram ID и имя.

2. Подсчет выпитого пива:
- Пользователь отправляют боту фотографию с пивом.
- Пользователь указывает объем выпитого пива в литрах через удобный кнопочный интерфейс (доступные варианты: 0.3л, 0.4л, 0.5л, 1.0л, 1.5л, 2.0л).
- Бот сохраняет информацию о том, сколько пива выпил каждый участник.
- Фотография сохраняется на сервере бота.
- Бот обновляет общую таблицу результатов.
- Фото и количество выпитого пива пересылается в общий групповой чат.

3. Таблица результатов:
- Команда для отображения текущей таблицы результатов всех участников ( /leaderboard ).
- Таблица должна показывать имя участника и общий объем выпитого пива, отсортированная по убыванию объема.

4. Определение победителя:
- Челледж завершается после определенного периода времени (31 августа 2025 года).
- Бот определяет победителя, который выпил наибольший объем пива и сообщает об этом всем участникам. Также бот сообщает на каком месте он завершил челендж в таблице.

5. Система достижений:
- При достижении определенных объемов выпитого пива участникам присваиваются тематические звания.
- Достижения с поздравлениями отправляются пользователю и в общий чат.
- Доступные достижения:
  - 1 л — "Падаван Пивного Ордена" (Звездные войны)
  - 5 л — "Хоббит из Шира" (Властелин колец)
  - 10 л — "Страж Пенного Стана" (Игра престолов)
  - 20 л — "Пивной Фалкон" (Соло: Звездные войны. Истории)
  - 30 л — "Герой Пивного Шилдена" (Мстители)
  - 40 л — "Хмельной Джек Воробей" (Пираты Карибского моря)
  - 50 л — "Пивной Гэндальф" (Властелин колец)
  - 75 л — "Хмелевой Джокер" (Темный рыцарь)
  - 100 л — "Пенный Доктор Стрэндж" (Доктор Стрэндж)

### Администрирование:
- команда /admin для перехода в режим администратора
- команда /change_leaderboard для изменения таблицы результатов (можно изменить количество выпитого пива любого участника)
- команда /check_submission для просмотра всех отправленных фотографий выбранного участника из таблицы результатов

### Настройка переменных окружения:
Перед запуском бота необходимо создать файл `.env` со следующими переменными:
```
# Токен Telegram бота
BOT_TOKEN=YOUR_BOT_TOKEN

# ID группового чата для публикации результатов
# Это должен быть числовой ID чата, например -1001234567890
GROUP_CHAT_ID=YOUR_GROUP_CHAT_ID
```

Для получения ID группового чата можно:
1. Добавить бота @RawDataBot в групповой чат
2. Найти значение "chat": {"id": -XXXXXXXXXX, ...} в выводе бота
3. Скопировать значение ID (с минусом, если есть) в переменную GROUP_CHAT_ID

### Деплой на Render.com

Для развертывания бота на Render.com выполните следующие шаги:

1. **Зарегистрируйтесь на Render.com**
   - Создайте аккаунт на [Render.com](https://render.com)

2. **Создайте новый Web Service**
   - В дашборде Render нажмите на кнопку "New" и выберите "Web Service"
   - Подключите свой GitHub/GitLab репозиторий с кодом бота

3. **Настройте параметры сервиса**
   - Name: задайте любое имя для вашего сервиса, например `beer-challenge-bot`
   - Environment: выберите `Docker`
   - Region: выберите ближайший к вам или к вашим пользователям регион
   - Branch: выберите основную ветку вашего репозитория
   - Plan: выберите Free plan для тестирования или платный, если нужна повышенная производительность

4. **Настройте переменные окружения**
   - В секции "Environment Variables" добавьте переменные:
     - `BOT_TOKEN` = Ваш токен Telegram бота
     - `GROUP_CHAT_ID` = ID группового чата

5. **Запустите деплой**
   - Нажмите "Create Web Service"
   - Render автоматически запустит сборку и деплой вашего бота

6. **Проверьте логи**
   - После успешного деплоя проверьте логи, чтобы убедиться, что бот запустился

### Примечания по деплою

- Убедитесь, что все зависимости указаны в `requirements.txt`
- База данных SQLite сохраняется в локальной файловой системе Render. Если вы хотите избежать потери данных при перезапуске контейнера, рассмотрите возможность использования облачной базы данных, например, Render PostgreSQL.
- Для файлов изображений достижений - они включены в Docker-образ и будут доступны при деплое.

### Язык программирования:
- Python 3.9+ - отличный выбор для разработки Telegram ботов благодаря простоте и наличию хороших библиотек
### Библиотеки:
- python-telegram-bot - популярная библиотека для создания Telegram ботов
- SQLAlchemy - ORM для работы с базой данных
- Pillow - для обработки изображений, если потребуется анализ фотографий
- python-dotenv - для управления переменными окружения

Для хранения данных:
- SQLite (локальный файл `beer_challenge.db`)
